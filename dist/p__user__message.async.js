(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{FVNi:function(e,t,a){"use strict";var n=a("g09b"),r=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("cWXX");var l=n(a("/ezw"));a("Mwp2");var i=n(a("VXEj"));a("Telt");var o=n(a("Tckk"));a("+L6B");var u,d,c,s=n(a("2/Rp")),f=n(a("p0pE")),m=n(a("gWZ8")),p=n(a("2Taf")),g=n(a("vZ4D")),v=n(a("l4Ni")),h=n(a("ujKo")),E=n(a("MhPg")),_=r(a("q1tI")),y=a("8+Sn"),k=a("MuoO"),b=10,w=(u=(0,k.connect)(function(e){var t=e.messages;return{messages:t}}),u((c=function(e){function t(){var e,a;(0,p.default)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=(0,v.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(r))),a.state={initLoading:!0,loading:!1,data:[],list:[],pagination:{count:0,current:0,pagiSize:0,total:0}},a.getData=function(e){var t=e.callback,n=e.payload,r=a.props.dispatch;r({type:"messages/fetch",payload:n,callback:t})},a.onLoadMore=function(){a.setState({loading:!0,list:a.state.data.concat((0,m.default)(new Array(b)).map(function(){return{loading:!0,name:{},from_user:{}}}))}),a.getData({callback:function(e){var t=a.state.data.concat(e.data.list);a.setState({data:t,list:t,loading:!1,pagination:(0,f.default)({},e.data.pagination)},function(){window.dispatchEvent(new Event("resize"))})},payload:{pageSize:b,page:a.state.pagination.current+1}})},a}return(0,E.default)(t,e),(0,g.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.getData({callback:function(t){if(1e4===t.status){e.setState({initLoading:!1,data:t.data.list,list:t.data.list,pagination:(0,f.default)({},t.data.pagination)});var a=JSON.parse((0,y.getCookie)("user"));a.notifications_count=0,(0,y.setCookie)("user",JSON.stringify(a),365)}},payload:{pageSize:b}})}},{key:"render",value:function(){var e=this.state,t=e.initLoading,a=e.loading,n=e.list,r=e.pagination,u=t||a?null:_.default.createElement("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"}},r.current<r.total/r.pageSize?_.default.createElement(s.default,{onClick:this.onLoadMore},"\u52a0\u8f7d\u66f4\u591a"):"");return _.default.createElement(i.default,{className:"demo-loadmore-list",loading:t,itemLayout:"horizontal",loadMore:u,dataSource:n,locale:{emptyText:"\u6ca1\u6709\u6d88\u606f..."},renderItem:function(e){if(1===e.type)var t=_.default.createElement("span",null,e.created_at," ",_.default.createElement("a",{href:"/user/".concat(e.from_user.username)},e.from_user.nickname)," ","\u8bc4\u8bba\u4e86\u60a8\u7684 ",_.default.createElement("a",{href:e.from_url},e.from_name)),a=e.origin?_.default.createElement("div",{style:{background:"rgba(0, 0, 0, 0.05)",borderRadius:"4px",marginBottom:"20px",padding:"30px 50px",margin:"20px 0"},dangerouslySetInnerHTML:{__html:e.origin.content}}):_.default.createElement("p",null,"\u8be5\u6761\u6d88\u606f\u5df2\u7ecf\u88ab\u5220\u9664");else if(2===e.type)t=_.default.createElement("span",null,e.created_at," ",_.default.createElement("a",{href:"/user/".concat(e.from_user.username)},e.from_user.nickname)," ","\u56de\u590d\u4e86\u60a8\u7684\u7559\u8a00 \u2014\u2014\u8be6\u60c5\u8bf7\u67e5\u770b",_.default.createElement("a",{href:e.from_url},e.from_name)," "),a=e.origin?_.default.createElement("div",{style:{background:"rgba(0, 0, 0, 0.05)",borderRadius:"4px",marginBottom:"20px",padding:"30px 50px",margin:"20px 0"},dangerouslySetInnerHTML:{__html:e.origin.content}}):_.default.createElement("p",null,"\u8be5\u6761\u6d88\u606f\u5df2\u7ecf\u88ab\u5220\u9664");else if(3===e.type)t=_.default.createElement("span",null,e.created_at," ",_.default.createElement("a",{href:"/user/".concat(e.from_user.username)},e.from_user.nickname)," \u8d5e\u4e86\u60a8\u7684"," ",_.default.createElement("a",{href:e.from_url},e.from_name)),a="";return _.default.createElement(i.default.Item,null,_.default.createElement(l.default,{avatar:!0,title:!1,loading:e.loading,active:!0},_.default.createElement(i.default.Item.Meta,{avatar:_.default.createElement(o.default,{src:e.from_user.avatar}),title:t,description:a})))}})}}]),t}(_.PureComponent),d=c))||d),x=w;t.default=x}}]);